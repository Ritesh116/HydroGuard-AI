<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HydroGuard AI - Daily Operations Report</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f4f4f9; padding: 20px; color: #333; }
        .report-container { max-width: 800px; background: white; margin: auto; padding: 40px; box-shadow: 0 0 10px rgba(0,0,0,0.1); border-top: 6px solid #00ffcc; }
        .header { display: flex; justify-content: space-between; border-bottom: 2px solid #eee; padding-bottom: 20px; margin-bottom: 20px; }
        .title { font-size: 24px; font-weight: bold; color: #151b23; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; font-size: 14px; }
        th { background-color: #f8f9fa; font-weight: bold; color: #333; }
        .high-risk { color: #d73a49; font-weight: bold; }
        .med-risk { color: #b08800; font-weight: bold; }
        .btn-print { display: block; width: 150px; margin: 30px auto 0; padding: 10px; background: #2ea043; color: white; text-align: center; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
        @media print { .btn-print { display: none; } body { background: white; } .report-container { box-shadow: none; padding: 0; } }
    </style>
</head>
<body>

<div class="report-container">
    <div class="header">
        <div>
            <div class="title">HydroGuard AI</div>
            <div style="font-size: 14px; color: #666; margin-top: 5px;">Amravati Municipal Corporation (AMC)</div>
            <div style="font-size: 14px; color: #666;">Daily Network Health & Leakage Report</div>
        </div>
        <div style="text-align: right; font-size: 14px; color: #555;">
            <b>Date Generated:</b><br>{{ date }}<br>
            <b>Generated By:</b> Automated SCADA System
        </div>
    </div>

    <p>This document contains the AI-generated 24-hour summary of pipeline telemetry, pressure variances, and isolated leakage events across all 8 zones.</p>

    <table>
        <thead>
            <tr>
                <th>Zone / ESR Name</th>
                <th>Avg 24h PSI</th>
                <th>Leak Events</th>
                <th>Est. Water Loss</th>
                <th>AI Maintenance Priority</th>
            </tr>
        </thead>
        <tbody>
            {% for row in summary %}
            <tr>
                <td><b>{{ row.zone }}</b></td>
                <td>{{ row.avg_psi }} PSI</td>
                <td>{{ row.leak_events }}</td>
                <td style="color: {% if row.water_loss != '0 L' %}#d73a49{% else %}inherit{% endif %};">{{ row.water_loss }}</td>
                <td class="{% if 'High' in row.priority %}high-risk{% elif 'Medium' in row.priority %}med-risk{% endif %}">
                    {{ row.priority }}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div style="margin-top: 40px; font-size: 12px; color: #888; border-top: 1px solid #eee; padding-top: 10px;">
        * Notice: The estimated water loss is calculated based on flow rate divergence algorithms. Exact physical loss may vary. Please dispatch ground teams for physical verification of High Priority zones.
    </div>

    <button class="btn-print" onclick="window.print()">üñ®Ô∏è Print / Save PDF</button>
</div>

</body>
</html>